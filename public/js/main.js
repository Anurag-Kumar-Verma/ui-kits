const ellipsisIcon = `
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9.16665 9.99996C9.16665 10.4602 9.53974 10.8333 9.99998 10.8333C10.4602 10.8333 10.8333 10.4602 10.8333 9.99996C10.8333 9.53972 10.4602 9.16663 9.99998 9.16663C9.53974 9.16663 9.16665 9.53972 9.16665 9.99996Z" fill="currentColor" stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M3.33333 9.99996C3.33333 10.4602 3.70643 10.8333 4.16667 10.8333C4.6269 10.8333 5 10.4602 5 9.99996C5 9.53972 4.6269 9.16663 4.16667 9.16663C3.70643 9.16663 3.33333 9.53972 3.33333 9.99996Z" fill="currentColor" stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M15 9.99996C15 10.4602 15.3731 10.8333 15.8334 10.8333C16.2936 10.8333 16.6667 10.4602 16.6667 9.99996C16.6667 9.53972 16.2936 9.16663 15.8334 9.16663C15.3731 9.16663 15 9.53972 15 9.99996Z" fill="currentColor" stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`;
const penciIcon = `
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_3_26)">
<path d="M3.33334 16.6666H6.66668L15.4167 7.91663C15.8587 7.47461 16.107 6.87509 16.107 6.24997C16.107 5.62485 15.8587 5.02533 15.4167 4.5833C14.9746 4.14127 14.3751 3.89294 13.75 3.89294C13.1249 3.89294 12.5254 4.14127 12.0833 4.5833L3.33334 13.3333V16.6666Z" stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M11.25 5.41663L14.5833 8.74996" stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round"/>
</g>
<defs><clipPath id="clip0_3_26"><rect width="20" height="20" fill="white"/></clipPath></defs>
</svg>
`;
const trashIcon = `
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_3_32)">
<path d="M3.33334 5.83337H16.6667" stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M8.33334 9.16663V14.1666" stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M11.6667 9.16663V14.1666" stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M4.16666 5.83337L4.99999 15.8334C4.99999 16.2754 5.17558 16.6993 5.48815 17.0119C5.80071 17.3244 6.22463 17.5 6.66666 17.5H13.3333C13.7754 17.5 14.1993 17.3244 14.5118 17.0119C14.8244 16.6993 15 16.2754 15 15.8334L15.8333 5.83337" stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M7.5 5.83333V3.33333C7.5 3.11232 7.5878 2.90036 7.74408 2.74408C7.90036 2.5878 8.11232 2.5 8.33333 2.5H11.6667C11.8877 2.5 12.0996 2.5878 12.2559 2.74408C12.4122 2.90036 12.5 3.11232 12.5 3.33333V5.83333" stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round"/>
</g>
<defs>
<clipPath id="clip0_3_32"><rect width="20" height="20" fill="white"/>
</clipPath></defs>
</svg>
`;
const addCircleIcon = `
<svg viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg">
<circle cx="36" cy="36" r="34" fill="white" stroke="#F0F4FB" stroke-width="4"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M36 16C35.1113 16 34.3908 16.7205 34.3908 17.6092V34.3908H17.6092C16.7205 34.3908 16 35.1112 16 36C16 36.8887 16.7205 37.6092 17.6092 37.6092H34.3908V54.3908C34.3908 55.2795 35.1113 56 36 56C36.8888 56 37.6092 55.2795 37.6092 54.3908V37.6092H54.3908C55.2795 37.6092 56 36.8887 56 36C56 35.1112 55.2795 34.3908 54.3908 34.3908H37.6092V17.6092C37.6092 16.7205 36.8888 16 36 16Z" fill="currentColor"/>
</svg>
`;
const emailIcon = `
<svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g clip-path="url(#clip0_4_57)">
    <path d="M15.8333 4.16666H4.16667C3.24619 4.16666 2.5 4.91285 2.5 5.83332V14.1667C2.5 15.0871 3.24619 15.8333 4.16667 15.8333H15.8333C16.7538 15.8333 17.5 15.0871 17.5 14.1667V5.83332C17.5 4.91285 16.7538 4.16666 15.8333 4.16666Z" stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M2.5 5.83334L10 10.8333L17.5 5.83334" stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round"/>
    </g>
    <defs>
    <clipPath id="clip0_4_57">
    <rect width="20" height="20" fill="white"/>
    </clipPath>
    </defs>
</svg>
`;
const twitterIcon = `
<svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g clip-path="url(#clip0_4_54)">
    <path d="M18.3333 3.34168C17.5 3.75001 16.6833 3.91584 15.8333 4.16668C14.8992 3.11251 13.5142 3.05418 12.1833 3.55251C10.8525 4.05084 9.98082 5.26918 9.99999 6.66668V7.50001C7.29582 7.56918 4.88749 6.33751 3.33332 4.16668C3.33332 4.16668 -0.151677 10.3608 6.66666 13.3333C5.10666 14.3725 3.55082 15.0733 1.66666 15C4.42332 16.5025 7.42749 17.0192 10.0283 16.2642C13.0117 15.3975 15.4633 13.1617 16.4042 9.81251C16.6848 8.7939 16.8242 7.74156 16.8183 6.68501C16.8167 6.47751 18.0767 4.37501 18.3333 3.34084V3.34168Z" stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round"/>
    </g>
    <defs>
    <clipPath id="clip0_4_54">
    <rect width="20" height="20" fill="white"/>
    </clipPath>
    </defs>
</svg>
`;

const editIconPlaces = document.querySelectorAll('.icon.editIcon');
editIconPlaces.forEach((item) => {
    item.innerHTML = penciIcon;
});
const optionIconPlaces = document.querySelectorAll('.icon.ellipsisIcon');
optionIconPlaces.forEach((item) => {
    item.innerHTML = ellipsisIcon;
});

const mainHeader = document.querySelector("header");
if(mainHeader){
    // console.log(mainHeader);
    // mainHeader.innerHTML = 'header';
}
const navToggleBtn = document.querySelector("#navToggle");
const collapseDivId = navToggleBtn.getAttribute('data-toggle');
const navCollapse = document.getElementById(collapseDivId);

const activePath = window.location.pathname;
const navMenus = [
    {label: 'Home', url: '/index.html'},
    {label: 'About', url: '/about.html'},
    {label: 'Filters', url: '/filters.html', children: [{label: 'Item 1', url: '/filters.html',},{label: 'Item 2', url: '/',}]},
    {label: 'Contact', url: '/'},
];
const filterData1 = [
    {label: 'Agriculture', isChecked: true,},
    {label: 'Air Transport', isChecked: false,},
    {label: 'Business Services', isChecked: false,},
    {label: 'Construction', isChecked: true,},
    {label: 'Dairy', isChecked: false,},
    {label: 'Education', isChecked: false,},
    {label: 'Health', isChecked: false,},
];
function createMenuItem(item){
    const li = document.createElement('li');
    const anchor = document.createElement('a');
    li.className = 'nav-item';
    anchor.className = `nav-link ${activePath == item.url && 'active'}`;
    anchor.innerHTML = item.label;
    li.append(anchor);
    if(item.children){
        const nested = document.createElement('ul');
        // console.log(li.getClientRects());
        nested.className = `sub-menu`;
        anchor.classList.add('dropdown-toggle')
        for (let index = 0; index < item.children.length; index++) {
            nested.appendChild(createMenuItem(item.children[index]));
        }
        li.append(nested);
        li.addEventListener('click', (e) => {
            e.stopPropagation();
            e.preventDefault();
            // nested.classList.toggle('show');
        })
    } else {
        anchor.href = item.url;
    }
    return li;
}

if(navCollapse){
    const menuList = navCollapse.querySelector('.navbar-menu');
    if(menuList){
        navMenus.forEach((item) => {
            menuList.append(createMenuItem(item));
        });
    }
}
navToggleBtn.addEventListener('click', (e)=> {
    e.stopImmediatePropagation();
    e.preventDefault();
    if(navCollapse){
        navCollapse.classList.toggle('show');
    }
});

function loadFilterData(searchString){
    const filter1 = document.getElementById('filter1');
    if(filter1){
        const contentSec = filter1.querySelector('.card-content');
        contentSec.innerHTML = '';
        filterData1.filter((item) => item.label.trim().toLowerCase().includes(searchString.trim().toLowerCase())).forEach((item, index) => {
            const itemFlex = document.createElement('div');
            itemFlex.className = `filterItem`;
            itemFlex.id = `${index}_item`;
            itemFlex.innerHTML = `
            <input type="checkbox" id="${index}_filter1_item" ${item.isChecked == true && 'checked'}>
            <label for="${index}_filter1_item">${item.label}</label>
            `;
            if (contentSec) {
                contentSec.append(itemFlex);
            }
        });
    }
}
function searchFilter1(event){
    const inputVal = event.target.value;
    clearTimeout(timeoutDelay);
    timeoutDelay = setTimeout(() => {
        loadFilterData(inputVal.toString().trim().toLowerCase());
    }, 1500);
}
loadFilterData('');

const profilesData1 = [
    {name: 'Andrew Robinson', avatar: 'AR'},
    {name: 'Randy Robinson', avatar: 'RR'},
];
const profileSec = document.querySelector('.multipleProfiles .usersList');
profilesData1.forEach((person, index) => {
    const cardOuter = document.createElement('div');
    cardOuter.className = `card-outer`;
    cardOuter.id = `${index}_profile_card`;
    const userCard = `
        <div class="card userCard">
            <div class="card-body">
                <div class="avatar avatar_div">
                    <span>${person.avatar}</span>
                </div>
                <h5 class="userName">${person.name}</h5>

                <div class="actionSec">
                    <button class="optionBtn" aria-label="Option">
                        ${ellipsisIcon}
                    </button>
                    <div class="popover">
                        <div class="menu">
                            <div class="menu-item">
                                ${penciIcon}
                                <span>Edit</span>
                            </div>
                            <div class="menu-item">
                                ${trashIcon}
                                <span>Delete</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `;
    cardOuter.innerHTML = userCard;
    if(profileSec){
        profileSec.append(cardOuter);
    }
});
if(profileSec){

}

const users_list_1 = [
    {name: 'Lelah Nichols', avatar: 'LN', role: 'Backend Developer', tags: ['SQL', 'MongoDb']},
    {name: 'Ayush Khurana', avatar: 'AK', role: 'Full-stack Developer', tags: ['SQL', 'MongoDb', 'React.js']},
    {name: 'Vikash Samual', avatar: 'VS', role: 'Backend Developer', tags: ['SQL', 'MongoDb', 'Node.js']},
    {name: 'Lelah Nichols', avatar: 'LN', role: 'Backend Developer', tags: ['SQL', 'MongoDb']},
    {name: 'Lelah Nichols', avatar: 'LN', role: 'Backend Developer', tags: ['SQL', 'MongoDb']},
];

const userListSection  = document.querySelector("#users_list_2 .usersList");
users_list_1.forEach((user, index) => {
    const itemDiv = document.createElement('div');
    itemDiv.className = ``;
    itemDiv.id = `user_list_1_item_${index}`;
    let tags = '';
    if(user.tags && user.tags.length > 0){
        tags = `
            <div class="tags">
                ${user.tags.flatMap((tag) => {
                   return `<span class="tag_item">${tag}</span>`
                }).join('')}
            </div>
        `;
    }
    const itemCard = `
        <div class="card user_card">
            <div class="card-body">
                <div class="avatar">
                    <span>${user.avatar}</span>
                </div>
                <div class="user_info">
                    <p class="user_name">${user.name}</p>
                    <small class="user_role">${user.role}</small>
                    ${user.tags && tags}
                </div>
            </div>
        </div>
    `;
    itemDiv.innerHTML = itemCard;
    if(userListSection){
        userListSection.append((itemDiv));
    }
});

const peopleListData1 = [
    {name: 'Lelah Nichols', avatar: 'LN', role: 'Backend Developer', socials: {email: 'abhi@gmail.com', twitter: 'https://x.com/', linkedin: 'https://linkedin.com'}},
    {name: 'Ayush Khurana', avatar: 'AK', role: 'Full-stack Developer', socials: {email: 'abhi@gmail.com', twitter: 'https://x.com/'}},
    {name: 'Vikash Samual', avatar: 'VS', role: 'Backend Developer', socials: {}},
    {name: 'Lelah Nichols', avatar: 'LN', role: 'Backend Developer', socials: {email: 'abhi@gmail.com', twitter: 'https://x.com/', linkedin: 'https://linkedin.com'}},
    {name: 'Lelah Nichols', avatar: 'LN', role: 'Backend Developer', socials: {email: 'abhi@gmail.com', twitter: 'https://x.com/', linkedin: 'https://linkedin.com'}},
];
peopleListData1.forEach((item, index) => {
    const itemDiv = document.createElement('div');
    itemDiv.className = `list_item`;
    itemDiv.id = `people_${index}`;
    const socials = [];
    for(let key in item.socials){
        const icon = key == 'email' ? emailIcon :key == 'twitter' ? twitterIcon : '';
        const linkUrl = key == 'email' ? 'mailto:'+item.socials[key] : item.socials[key];
        if(item.socials[key]){
            socials.push(`<a href="${linkUrl}" target="_blank" class="social_item">
                ${icon}<span>${key.toUpperCase()}</span>
            </a>`);
        }

    }
    const itemData = `
    <div class="avatar"><span>${item.avatar}</span></div>
    <div class="item-content">
        <p class="truncateText people_name">${item.name}</p>
        <p class="people_role">${item.role}</p>
        <div class="socials">
            ${socials.map((item) => {
                return item;
            }).join('')}
        </div>
    </div>`;
    itemDiv.innerHTML = itemData;
    const listSection = document.querySelector('#people_list_1 .usersList');
    if(listSection){
        listSection.append(itemDiv);
        if(peopleListData1.length > 4 && index == peopleListData1.length-1){
            const viewBtn = document.createElement('button');
            viewBtn.className = 'btn viewAllBtn';
            viewBtn.innerText = 'View everyone';
            listSection.insertAdjacentElement('afterend', viewBtn);
        }
    }
});

